# 🚀 FastGPT RAG 测试快速开始指南

## 概述

这个测试套件为你提供了完整的 FastGPT RAG API 测试工具，包括：
- 🌐 **可视化前端测试界面** - 无需代码，直接在浏览器中测试
- 🔧 **自动化测试脚本** - 完整的API功能验证
- 📄 **示例文档** - 真实的测试数据和用例

## ⚡ 超快速开始（3步搞定）

### 第1步：启动你的FastGPT RAG服务

```bash
# 在 FastGPTRAG 目录下
npm start
```

确保服务在 `http://localhost:3001` 运行

### 第2步：选择测试方式

#### 方式A：可视化界面测试（推荐新手）

```bash
npm run test:frontend
```

然后在浏览器打开 `http://localhost:8080`

#### 方式B：自动化脚本测试

```bash
# 完整功能测试
npm test

# 或者选择特定测试
npm run test:simple        # 快速测试
npm run test:comprehensive # 深度测试
```

### 第3步：开始测试

就这么简单！🎉

## 📱 前端界面使用指南

### 界面功能

1. **API配置区域**
   - 设置服务地址（默认：http://localhost:3001）
   - 配置团队ID和用户ID
   - 测试连接状态

2. **功能标签页**
   - 📚 **知识库管理** - 创建、查询、删除知识库
   - 📁 **集合管理** - 文本集合、文件上传
   - 📝 **数据管理** - 添加、修改、删除数据
   - 🔍 **搜索测试** - 各种搜索模式测试
   - 📊 **监控** - 系统健康和使用统计

3. **操作流程**
   ```
   连接测试 → 创建知识库 → 添加数据 → 搜索测试
   ```

### 推荐测试流程

1. **点击"测试连接"** - 确认API可用
2. **创建知识库** - 在知识库管理页面
3. **添加内容** - 可以选择：
   - 创建文本集合（直接输入文本）
   - 上传文件（拖拽或点击选择）
4. **进行搜索** - 在搜索页面测试不同搜索模式
5. **查看结果** - 在底部结果区域和日志区域

## 🤖 自动化测试说明

### 可用的测试命令

```bash
npm test                    # 默认API测试
npm run test:api           # 完整API功能测试
npm run test:simple        # 快速基础功能测试
npm run test:comprehensive # 深度综合测试（包含性能测试）
npm run test:frontend      # 启动前端测试界面
```

### 测试内容

#### 1. 基础功能测试 (`test:api`)
- ✅ 系统健康检查
- ✅ 知识库增删改查
- ✅ 集合管理
- ✅ 数据操作
- ✅ 搜索功能
- ✅ 文件上传

#### 2. 简单测试 (`test:simple`)
- ✅ 快速健康检查
- ✅ 基础搜索验证

#### 3. 综合测试 (`test:comprehensive`)
- ✅ 所有API功能
- ✅ 性能压力测试
- ✅ 并发测试
- ✅ 错误处理测试
- ✅ 详细测试报告

## 📄 测试用例和数据

### 自动创建的测试数据

测试会自动创建：
- 知识库：包含FastGPT介绍信息
- 文本集合：技术文档和使用指南
- 文件集合：示例文档上传
- 问答数据：常见问题和解答

### 示例文档

在 `test/sample-documents/` 目录下：
- `sample.txt` - FastGPT系统完整介绍
- `api-guide.md` - API使用指南
- `test-document.txt` - 基础测试文档

你可以在前端界面中直接上传这些文档进行测试。

## 🔧 自定义配置

### 修改API地址

如果你的服务运行在其他地址，可以：

1. **前端界面** - 在API配置区域修改
2. **测试脚本** - 修改 `test/` 目录下的配置：

```javascript
const config = {
  baseURL: 'http://your-server:3001',  // 修改这里
  teamId: 'your-team-id',
  userId: 'your-user-id'
};
```

### 环境变量配置

```bash
export FASTGPT_API_URL=http://localhost:3001
export FASTGPT_TEAM_ID=507f1f77bcf86cd799439011
export FASTGPT_USER_ID=507f1f77bcf86cd799439012
```

## 🎯 常见使用场景

### 场景1：快速验证功能
```bash
npm run test:simple
```
适用于：开发过程中快速验证基础功能

### 场景2：完整功能测试
```bash
npm run test:api
```
适用于：发布前的完整功能验证

### 场景3：性能基准测试
```bash
npm run test:comprehensive
```
适用于：性能优化和压力测试

### 场景4：可视化调试
```bash
npm run test:frontend
```
适用于：手动测试、演示、调试特定功能

### 场景5：集成测试
```bash
# 在CI/CD中
npm run test:api
```
适用于：自动化部署流水线

## 🔍 测试结果解读

### 控制台输出

- ✅ **绿色** - 操作成功
- ❌ **红色** - 操作失败
- ⚠️ **黄色** - 警告或跳过
- ℹ️ **蓝色** - 信息提示

### 前端界面

- **实时日志** - 底部黑色区域显示操作日志
- **结果显示** - 灰色区域显示API响应结果
- **状态指示器** - 连接状态的颜色指示

### 测试报告（comprehensive测试）

```
📋 测试报告
==================================================
📅 测试时间: 2024-01-01 12:00:00
⏱️ 总耗时: 45.2 秒
📊 知识库数量: 1
📊 集合数量: 2
📊 数据条数: 8
📊 搜索结果: 5 条
📄 测试文件: 2 个
==================================================
```

## 🐛 故障排除

### 常见问题

**Q: 连接失败怎么办？**
```
1. 检查服务是否启动：npm start
2. 确认端口3001没有被占用
3. 检查防火墙设置
```

**Q: 前端页面打不开？**
```
1. 确认运行了：npm run test:frontend
2. 检查端口8080是否可用
3. 尝试刷新浏览器
```

**Q: 搜索结果为空？**
```
1. 确认已添加数据
2. 等待向量化训练完成
3. 调整相似度阈值
```

**Q: 文件上传失败？**
```
1. 检查文件大小（建议<10MB）
2. 确认文件格式支持
3. 检查服务器存储空间
```

### 调试技巧

1. **查看详细日志**
   - 前端：打开浏览器开发者工具
   - 后端：查看服务器控制台输出

2. **单步测试**
   - 使用前端界面逐步操作
   - 观察每一步的结果

3. **检查服务状态**
   ```bash
   curl http://localhost:3001/health
   ```

## 📖 扩展学习

### 了解API详情

查看 `test/sample-documents/api-guide.md` 了解：
- 完整的API接口说明
- 请求响应格式
- 参数详细说明
- 最佳实践

### 自定义测试

1. **修改测试数据** - 编辑示例文档
2. **添加测试用例** - 在测试脚本中添加新功能
3. **扩展前端界面** - 修改HTML页面添加新功能

## 🚀 进阶技巧

### 批量测试

```bash
# 运行所有类型的测试
npm run test:simple && npm run test:api && npm run test:comprehensive
```

### 自动化脚本

创建你自己的测试脚本：
```javascript
import { runTests } from './test/api.test.js';

// 自定义测试逻辑
await runTests();
console.log('自定义测试完成');
```

### 持续集成

在你的CI配置中：
```yaml
- name: Test FastGPT RAG
  run: |
    npm start &
    sleep 10
    npm run test:api
```

---

## 🎉 开始你的测试之旅！

选择你喜欢的方式开始测试：

```bash
# 图形化界面（推荐）
npm run test:frontend

# 或者自动化测试
npm test
```

祝你测试愉快！如果遇到问题，请查看 `test/README.md` 获取更详细的帮助。
